import{r as h,o as y,a as o,c as l,b as n,t as c,F as v,d as _,e as f,n as b}from"./index.0a460af2.js";const g={class:"min-h-screen bg-gray-700 text-white py-8 text-center"},x=n("h1",{class:"text-4xl font-black uppercase mb-8"},"Polling Station",-1),w={key:0},k={class:"text-2xl font-bold mb-4"},S={key:0},j=["onClick"],B={key:1},C=n("p",{class:"text-lg mb-4"},"You have voted!",-1),$={class:"w-full max-w-sm mx-auto"},M={class:"mr-4"},E={__name:"Home",setup(N){const r="http://localhost:5000/api",t=h(null),p=h(!1),m=async a=>{try{(await fetch(`${r}/poll/vote`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({option:a})}).then(s=>s.json())).success&&(p.value=!0)}catch(e){console.log(e)}};return y(async()=>{const a=await fetch(`${r}/poll/active`).then(e=>e.json());a.poll!=null&&(t.value={title:a.poll.title,options:a.poll.options,votes:a.poll.votes},setInterval(async()=>{const e=await fetch(`${r}/poll/results`).then(s=>s.json());e.success&&(t.value.votes=e.votes)},1e3))}),(a,e)=>(o(),l("main",g,[x,t.value?(o(),l("div",w,[n("h3",k,c(t.value.title),1),p.value?(o(),l("div",B,[C,(o(!0),l(v,null,_(t.value.votes,(s,i)=>(o(),l("div",$,[n("div",{class:"bg-gray-800 p-4 rounded mb-2 flex justify-between",style:b(`width: ${Math.round(s/t.value.votes.reduce((u,d)=>u+d,0)*100)+"%"}`)},[n("span",M,c(t.value.options[i]),1),n("span",null,c(Math.round(s/t.value.votes.reduce((u,d)=>u+d,0)*100)+"%"),1)],4)]))),256))])):(o(),l("div",S,[(o(!0),l(v,null,_(t.value.options,(s,i)=>(o(),l("button",{onClick:()=>m(i),class:"block w-full max-w-sm mx-auto bg-gray-800 p-4 rounded mb-2 hover:bg-gray-600"},[n("span",null,c(s),1)],8,j))),256))]))])):f("",!0)]))}};export{E as default};
